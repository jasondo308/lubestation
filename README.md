# LubeStation - Äáº·t HÃ ng TrÆ°á»›c

**powered by TheGioiRubik**

LubeStation lÃ  má»™t trang web Ä‘áº·t hÃ ng trÆ°á»›c dáº§u bÃ´i trÆ¡n cube cao cáº¥p tá»« TheCubicle vÃ  SpeedCubeShop, Ä‘Æ°á»£c thiáº¿t káº¿ dÃ nh riÃªng cho thá»‹ trÆ°á»ng Viá»‡t Nam.

## ğŸ“‹ Má»¥c Lá»¥c

- [Tá»•ng Quan](#tá»•ng-quan)
- [TÃ­nh NÄƒng](#tÃ­nh-nÄƒng)
- [Cáº¥u TrÃºc Dá»± Ãn](#cáº¥u-trÃºc-dá»±-Ã¡n)
- [Cáº¥u TrÃºc Dá»¯ Liá»‡u](#cáº¥u-trÃºc-dá»¯-liá»‡u)
- [CÃ i Äáº·t vÃ  Cháº¡y](#cÃ i-Ä‘áº·t-vÃ -cháº¡y)
- [Quáº£n LÃ½ Sáº£n Pháº©m](#quáº£n-lÃ½-sáº£n-pháº©m)
- [Kiáº¿n TrÃºc Ká»¹ Thuáº­t](#kiáº¿n-trÃºc-ká»¹-thuáº­t)

---

## ğŸ¯ Tá»•ng Quan

LubeStation lÃ  má»™t á»©ng dá»¥ng web Next.js 15 Ä‘Æ°á»£c xÃ¢y dá»±ng Ä‘á»ƒ cho phÃ©p khÃ¡ch hÃ ng Viá»‡t Nam Ä‘áº·t hÃ ng trÆ°á»›c cÃ¡c sáº£n pháº©m dáº§u bÃ´i trÆ¡n cube cao cáº¥p. Trang web cung cáº¥p:

- **111 sáº£n pháº©m** tá»« hai nhÃ  cung cáº¥p lá»›n (77 tá»« TheCubicle, 34 tá»« SpeedCubeShop)
- **Giao diá»‡n hoÃ n toÃ n tiáº¿ng Viá»‡t** vá»›i giÃ¡ VND
- **Há»‡ thá»‘ng lá»c phÃ¢n cáº¥p** theo thÆ°Æ¡ng hiá»‡u vÃ  danh má»¥c phá»¥
- **Chá»©c nÄƒng tÃ¬m kiáº¿m** thá»i gian thá»±c
- **MÃ´ táº£ sáº£n pháº©m song ngá»¯** (Tiáº¿ng Viá»‡t/English)
- **Form Ä‘áº·t hÃ ng** vá»›i cÃ¡c thÃ nh phá»‘ Viá»‡t Nam

---

## âœ¨ TÃ­nh NÄƒng

### 1. Danh SÃ¡ch Sáº£n Pháº©m
- Hiá»ƒn thá»‹ sáº£n pháº©m theo dáº¡ng card vá»›i thiáº¿t káº¿ hiá»‡n Ä‘áº¡i, tá»‘i giáº£n
- NhÃ³m sáº£n pháº©m theo tÃªn vá»›i cÃ¡c biáº¿n thá»ƒ kÃ­ch thÆ°á»›c
- Chá»n kÃ­ch thÆ°á»›c báº±ng nÃºt báº¥m trá»±c quan (3cc, 5cc, 10cc)
- Hiá»ƒn thá»‹ giÃ¡ VND vá»›i Ä‘á»‹nh dáº¡ng phÃ¢n cÃ¡ch hÃ ng nghÃ¬n

### 2. Há»‡ Thá»‘ng Lá»c
- **Tab thÆ°Æ¡ng hiá»‡u**: Táº¥t Cáº£ / TheCubicle / SpeedCubeShop
- **Danh má»¥c phá»¥**:
  - **TheCubicle**: FZ Series, Water-Based Lubes, Silicone Weights, Cubicle Labs, Angstrom Research
  - **SpeedCubeShop**: Cosmic Lube, Speed Lube (Weights)
- **TÃ¬m kiáº¿m**: TÃ¬m kiáº¿m theo tÃªn hoáº·c mÃ´ táº£ sáº£n pháº©m

### 3. Giá» HÃ ng
- ThÃªm/bá»›t sá»‘ lÆ°á»£ng sáº£n pháº©m
- TÃ­nh tá»•ng tá»± Ä‘á»™ng theo VND
- Hiá»ƒn thá»‹ chi tiáº¿t tá»«ng sáº£n pháº©m trong giá»
- Sticky sidebar Ä‘á»ƒ luÃ´n hiá»ƒn thá»‹ giá» hÃ ng

### 4. MÃ´ Táº£ Sáº£n Pháº©m
- MÃ´ táº£ chi tiáº¿t cÃ³ thá»ƒ má»Ÿ rá»™ng/thu gá»n
- Chuyá»ƒn Ä‘á»•i ngÃ´n ngá»¯ Tiáº¿ng Viá»‡t/English
- 45 sáº£n pháº©m cÃ³ mÃ´ táº£ chi tiáº¿t song ngá»¯

### 5. Form Äáº·t HÃ ng
- Há» vÃ  TÃªn (báº¯t buá»™c)
- Email (báº¯t buá»™c)
- Sá»‘ Äiá»‡n Thoáº¡i (báº¯t buá»™c)
- ThÃ nh Phá»‘ - dropdown vá»›i 15 thÃ nh phá»‘ lá»›n Viá»‡t Nam (báº¯t buá»™c)
- Äá»‹a Chá»‰ (báº¯t buá»™c)
- Ghi ChÃº (tÃ¹y chá»n)
- ThÃ´ng bÃ¡o thÃ nh cÃ´ng sau khi Ä‘áº·t hÃ ng

### 6. UI/UX Hiá»‡n Äáº¡i
- Gradient backgrounds cho header vÃ  buttons
- Rounded corners (rounded-xl, rounded-2xl)
- Shadow effects vÃ  hover animations
- Dark mode support
- Responsive design cho mobile vÃ  desktop

---

## ğŸ“ Cáº¥u TrÃºc Dá»± Ãn

```
Lubestation/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ layout.tsx           # Root layout vá»›i metadata
â”‚   â”œâ”€â”€ page.tsx             # Main page - product listing, cart, search
â”‚   â””â”€â”€ globals.css          # Global styles
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ProductCard.tsx      # Product card vá»›i size selector vÃ  descriptions
â”‚   â”œâ”€â”€ CartSummary.tsx      # Cart summary sidebar
â”‚   â””â”€â”€ PreOrderForm.tsx     # Pre-order form vá»›i Vietnamese cities
â”‚
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ types.ts             # TypeScript type definitions
â”‚   â””â”€â”€ products.ts          # Product data loading vÃ  sub-category logic
â”‚
â”œâ”€â”€ stockprice/
â”‚   â”œâ”€â”€ stock-pricelist.xlsx # Formatted Excel file (source of truth)
â”‚   â”œâ”€â”€ stock-pricelist.json # JSON version for app consumption
â”‚   â””â”€â”€ product-descriptions.json # Parsed bilingual descriptions
â”‚
â”œâ”€â”€ data-processing/         # Scripts xá»­ lÃ½ dá»¯ liá»‡u
â”‚   â”œâ”€â”€ analyze-pricelist.js
â”‚   â”œâ”€â”€ format-pricelist.js
â”‚   â”œâ”€â”€ verify-formatted.js
â”‚   â”œâ”€â”€ convert-to-json.js
â”‚   â””â”€â”€ parse-descriptions.js
â”‚
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ tailwind.config.ts
â””â”€â”€ README.md
```

---

## ğŸ—„ï¸ Cáº¥u TrÃºc Dá»¯ Liá»‡u

### Product Interface

```typescript
interface ProductVariant {
  id: number;                    // Unique variant ID
  productCode: string;           // e.g., "TCC-DNM-37-3CC"
  size: string;                  // e.g., "3cc", "5cc", "10cc"
  price: {
    cny: number;                 // Original price in Chinese Yuan
    vnd: number;                 // Converted price (1 CNY = 3900 VND)
  };
  weight: string;                // Product weight
  qtyPerCarton: number | string; // Quantity per carton
  moq: number | string;          // Minimum order quantity
  detailedDescription?: {        // Optional bilingual description
    en: string;
    vn: string;
  };
}

interface Product {
  productName: string;           // e.g., "TheCubicle Lube - DNM-37"
  description: string;           // Short description
  category: string;              // "TheCubicle" or "SpeedCubeShop"
  variants: ProductVariant[];    // Array of size variants
}
```

### Cart Interface

```typescript
interface CartItem {
  productName: string;
  variant: ProductVariant;
  quantity: number;
}
```

### Pre-Order Form Data

```typescript
interface PreOrderFormData {
  fullName: string;
  email: string;
  phone: string;
  city: string;      // Selected from Vietnamese cities dropdown
  address: string;
  notes?: string;
}
```

---

## ğŸš€ CÃ i Äáº·t vÃ  Cháº¡y

### Prerequisites
- Node.js 18+
- npm hoáº·c yarn

### CÃ i Äáº·t

```bash
# Clone repository
git clone [repository-url]
cd Lubestation

# CÃ i Ä‘áº·t dependencies
npm install

# Cháº¡y development server
npm run dev
```

Trang web sáº½ cháº¡y táº¡i: **http://localhost:3000**

### Build Production

```bash
npm run build
npm start
```

---

## ğŸ“¦ Quáº£n LÃ½ Sáº£n Pháº©m

### Nguá»“n Dá»¯ Liá»‡u

Táº¥t cáº£ dá»¯ liá»‡u sáº£n pháº©m Ä‘Æ°á»£c lÆ°u trong thÆ° má»¥c `stockprice/`:

1. **stock-pricelist.xlsx** - File Excel chÃ­nh (source of truth)
   - Sheet "cubicle": 77 sáº£n pháº©m tá»« TheCubicle
   - Sheet "scs": 34 sáº£n pháº©m tá»« SpeedCubeShop
   - Cá»™t: ID, Product Code, Product Name, Size, Price (Â¥), Price (VND), Weight, QTY/Carton, MOQ, Description

2. **stock-pricelist.json** - JSON version Ä‘Æ°á»£c táº¡o tá»± Ä‘á»™ng
   - Chá»©a metadata (conversionRate: 3900, totalProducts: 111)
   - Categories: cubicle vÃ  scs arrays

3. **product-descriptions.json** - MÃ´ táº£ chi tiáº¿t song ngá»¯
   - 45 sáº£n pháº©m cÃ³ mÃ´ táº£ Ä‘áº§y Ä‘á»§ EN/VN
   - ÄÆ°á»£c parse tá»« file full_product_descriptions_en_vi.txt

### Quy Táº¯c Lá»c Sáº£n Pháº©m

Products Ä‘Æ°á»£c lá»c dá»±a trÃªn cÃ¡c tiÃªu chÃ­ sau (xem `lib/products.ts`):

```typescript
// Loáº¡i bá»:
- Labels/Stickers (productName chá»©a "Label" hoáº·c "Sticker")
- Bottles (productName chá»©a "Bottle")
- KÃ­ch thÆ°á»›c > 10cc (size parsing)
- GiÃ¡ = 0 (price.vnd === 0)

// Káº¿t quáº£: 111 sáº£n pháº©m Ä‘Æ°á»£c hiá»ƒn thá»‹
```

### Danh Má»¥c Phá»¥ (Sub-Categories)

Logic phÃ¢n loáº¡i Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong `lib/products.ts`:

```typescript
// TheCubicle Sub-Categories:
- FZ Series: productName chá»©a "FZ"
- Water-Based Lubes: chá»©a "DNM" hoáº·c "Lubicle" (khÃ´ng pháº£i FZ)
- Silicone Weights: chá»©a "Weight"
- Cubicle Labs: chá»©a "Labs"
- Angstrom Research: chá»©a "Compound"

// SpeedCubeShop Sub-Categories:
- Cosmic Lube: chá»©a "Cosmic", "Lunar", "Martian", hoáº·c "Galaxy"
- Speed Lube (Weights): chá»©a "Speed Lube"
```

### Cáº­p Nháº­t Sáº£n Pháº©m

Äá»ƒ cáº­p nháº­t products:

1. **Sá»­a file Excel**: `stockprice/stock-pricelist.xlsx`
   - Sá»­a thÃ´ng tin sáº£n pháº©m, giÃ¡, hoáº·c thÃªm sáº£n pháº©m má»›i
   - Giá»¯ nguyÃªn cáº¥u trÃºc cá»™t

2. **Convert sang JSON**:
   ```bash
   node data-processing/convert-to-json.js
   ```

3. **ThÃªm mÃ´ táº£ chi tiáº¿t** (optional):
   - Sá»­a file `full_product_descriptions_en_vi.txt`
   - Cháº¡y parse script:
   ```bash
   node data-processing/parse-descriptions.js
   ```

4. **Restart dev server**:
   ```bash
   npm run dev
   ```

---

## ğŸ—ï¸ Kiáº¿n TrÃºc Ká»¹ Thuáº­t

### Tech Stack

- **Framework**: Next.js 15 (App Router)
- **Language**: TypeScript
- **Styling**: Tailwind CSS
- **UI**: React 18 vá»›i hooks
- **Data Processing**: xlsx library cho Excel parsing

### State Management

State Ä‘Æ°á»£c quáº£n lÃ½ báº±ng React `useState`:

```typescript
// Cart state: variantId -> quantity mapping
const [cart, setCart] = useState<Record<number, number>>({});

// Filter states
const [activeTab, setActiveTab] = useState<'all' | 'cubicle' | 'scs'>('all');
const [activeSubCategory, setActiveSubCategory] = useState<string>('All');
const [searchQuery, setSearchQuery] = useState('');
```

### Key Components Logic

#### 1. Product Filtering (app/page.tsx)

```typescript
const filteredProducts = products.filter(product => {
  // Brand filter
  if (activeTab === 'cubicle' && product.category !== 'TheCubicle') return false;
  if (activeTab === 'scs' && product.category !== 'SpeedCubeShop') return false;

  // Sub-category filter
  if (activeSubCategory !== 'All') {
    const productSubCat = getSubCategory(product.productName, product.category);
    if (productSubCat !== activeSubCategory) return false;
  }

  // Search filter
  if (searchQuery) {
    const query = searchQuery.toLowerCase();
    return product.productName.toLowerCase().includes(query) ||
           product.description.toLowerCase().includes(query);
  }

  return true;
});
```

#### 2. Cart Building (app/page.tsx)

```typescript
const cartItems: CartItem[] = Object.entries(cart)
  .filter(([_, quantity]) => quantity > 0)
  .map(([variantIdStr, quantity]) => {
    const variantId = parseInt(variantIdStr);

    // Find product and variant by ID
    for (const product of products) {
      const variant = product.variants.find(v => v.id === variantId);
      if (variant) {
        return {
          productName: product.productName,
          variant,
          quantity
        };
      }
    }
    return null;
  })
  .filter((item): item is CartItem => item !== null);
```

#### 3. Product Grouping (lib/products.ts)

```typescript
// Group products by name, creating variants for different sizes
const grouped = filteredData.reduce((acc, product) => {
  if (!acc[product.productName]) {
    acc[product.productName] = {
      productName: product.productName,
      description: product.description,
      category: product.category,
      variants: []
    };
  }
  acc[product.productName].variants.push(variant);
  return acc;
}, {});
```

### VND Currency Formatting

```typescript
const formatVND = (amount: number) => {
  return new Intl.NumberFormat('vi-VN').format(Math.round(amount));
};

// Output: "234,000 â‚«"
```

### Vietnamese Cities

15 thÃ nh phá»‘ lá»›n Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong `PreOrderForm.tsx`:

```typescript
const vietnameseCities = [
  'HÃ  Ná»™i', 'Há»“ ChÃ­ Minh', 'ÄÃ  Náºµng', 'Háº£i PhÃ²ng', 'Cáº§n ThÆ¡',
  'BiÃªn HÃ²a', 'Nha Trang', 'Huáº¿', 'VÅ©ng TÃ u', 'BuÃ´n Ma Thuá»™t',
  'Quy NhÆ¡n', 'ThÃ¡i NguyÃªn', 'Vinh', 'Thanh HÃ³a', 'Nam Äá»‹nh'
];
```

---

## ğŸ¨ Design System

### Colors
- **Primary**: Blue-600 to Blue-700 gradients
- **Success**: Green-50/500/800
- **Warning**: Yellow-50/500/800
- **Background**: Gray-50 (light), Gray-900 (dark)
- **Text**: Gray-900 (light), White (dark)

### Border Radius
- Small elements: `rounded-xl` (12px)
- Large cards: `rounded-2xl` (16px)
- Pills/badges: `rounded-full`

### Shadows
- Cards: `shadow-lg`, `shadow-xl`
- Hover: `shadow-2xl`
- Colored shadows: `shadow-blue-200`, `shadow-blue-900/50`

### Transitions
- `transition-all`
- `duration-300`
- `hover:scale-105`, `hover:-translate-y-1`

---

## ğŸ“Š Data Statistics

- **Total Products**: 111
  - TheCubicle: 77 products
  - SpeedCubeShop: 34 products
- **Products with Detailed Descriptions**: 45
- **Size Variants**: Primarily 3cc, 5cc, 10cc (all â‰¤ 10cc)
- **Price Range**: 31,200 â‚« - 351,000 â‚«
- **Conversion Rate**: 1 CNY = 3,900 VND

---

## ğŸ”„ Workflow

### User Flow
1. User lands on homepage â†’ sees all products
2. User can filter by:
   - Brand tab (All/TheCubicle/SpeedCubeShop)
   - Sub-category chips
   - Search bar
3. User selects size variant â†’ adjusts quantity â†’ adds to cart
4. Cart updates in real-time in sticky sidebar
5. User fills pre-order form with details
6. User submits order â†’ sees success message
7. Cart resets automatically

### Data Flow
1. Excel file (`stock-pricelist.xlsx`) - Source of truth
2. JSON conversion (`stock-pricelist.json`)
3. App loads JSON in `lib/products.ts`
4. Products filtered and grouped
5. Components receive processed data
6. UI renders with TypeScript type safety

---

## ğŸ› ï¸ Maintenance

### Regular Tasks

1. **Update Prices**:
   - Edit `stockprice/stock-pricelist.xlsx`
   - Run `node data-processing/convert-to-json.js`
   - Restart server

2. **Add New Products**:
   - Add rows to Excel file
   - Ensure columns match existing structure
   - Convert to JSON
   - Add descriptions if needed

3. **Update Descriptions**:
   - Edit `full_product_descriptions_en_vi.txt`
   - Run `node data-processing/parse-descriptions.js`

### Future Enhancements

- [ ] Backend integration for order processing
- [ ] Email notifications
- [ ] Admin panel for product management
- [ ] Image support when products have photos
- [ ] Stock availability tracking
- [ ] Multiple language support (currently VN/EN descriptions only)
- [ ] Payment gateway integration
- [ ] Order history for returning customers

---

## ğŸ“ Notes

- **No Images**: Currently no product images as this is a simple pre-order page
- **Internal Use**: Price data in `stockprice/` folder is for internal use only
- **Form Submission**: Currently logs to console - needs backend integration
- **CNY to VND**: Conversion rate is hardcoded at 3900 VND per 1 CNY

---

## ğŸ“ Contact

**LubeStation** - powered by **TheGioiRubik**

Â© 2024 LubeStation. Táº¥t cáº£ quyá»n Ä‘Æ°á»£c báº£o lÆ°u.

---

**Last Updated**: November 2024
